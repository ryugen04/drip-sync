# 💧 DripSync

## Wear OS 水分記録アプリ 企画書

---

## 1. プロジェクト概要

DripSyncは、Wear OSスマートウォッチとAndroidスマートフォンを連携させた水分摂取記録アプリです。ウォッチフェイス、タイル、Health Connect（Google Fit）連携により、ユーザーが手軽に水分摂取を記録・管理できる環境を提供します。

### 1.1 ビジョン

健康的な水分摂取習慣をサポートし、日常生活における脱水リスクを軽減する。**ウォッチから2タップで記録完了**という手軽さを実現します。

### 1.2 ターゲットユーザー

- 健康意識の高いWear OSユーザー
- フィットネス・スポーツ愛好家
- 水分摂取を医療的に管理する必要がある方
- 日常的にGoogle Fitを活用している方

---

## 2. システム構成
```
┌─────────────────────────────────────┐
│      Wear OS スマートウォッチ         │
│  ┌──────────┐ ┌──────┐ ┌─────┐     │
│  │ウォッチ   │ │タイル │ │アプリ│     │
│  │フェイス   │ │      │ │     │     │
│  └──────────┘ └──────┘ └─────┘     │
└─────────────────┬───────────────────┘
                  │ Data Layer API
                  ▼
┌─────────────────────────────────────┐
│        Android スマートフォン         │
│  ┌──────────────────────────────┐   │
│  │ モバイルアプリ（履歴・設定）    │   │
│  └──────────────────────────────┘   │
└─────────────────┬───────────────────┘
                  │ Health Connect API
                  ▼
┌─────────────────────────────────────┐
│     Google Fit / 他の健康アプリ       │
└─────────────────────────────────────┘
```

---

## 3. 機能一覧

### 3.1 Wear OS 機能

| 機能 | 説明 |
|------|------|
| **ウォッチフェイス** | 今日の摂取量をコンプリケーションで表示。進捗バー、数値表示に対応。タップで記録画面へ遷移。 |
| **タイル** | スワイプでアクセス可能な記録画面。プリセットボタン（200ml/500ml等）で即座に記録。カスタム量の入力にも対応。 |
| **スタンドアロンアプリ** | 詳細な記録（飲料の種類選択）、今日の履歴表示、目標達成通知設定。 |
| **リマインダー** | 設定間隔で水分摂取を促す通知。バイブレーション対応。 |

### 3.2 モバイルアプリ機能

| 機能 | 説明 |
|------|------|
| **ダッシュボード** | 今日の摂取量、目標達成率、週間・月間グラフを表示。 |
| **履歴** | 日別・週別・月別の摂取履歴をカレンダー形式で閲覧。編集・削除にも対応。 |
| **目標設定** | 1日の目標摂取量を設定（デフォルト2000ml）。体重・活動量に基づく推奨値も提案。 |
| **プリセット管理** | よく使う飲料量のプリセットをカスタマイズ（コップ1杯=200ml、ボトル=500ml等）。 |
| **Health Connect連携** | Google Fit等の他アプリとデータを双方向同期。エクスポート機能も搭載。 |

---

## 4. 技術スタック

| カテゴリ | 技術 |
|----------|------|
| **言語** | Kotlin 2.0 |
| **UI（モバイル）** | Jetpack Compose + Material 3 |
| **UI（Wear OS）** | Compose for Wear OS + Horologist |
| **ウォッチフェイス** | Watch Face Format (WFF) または Watchface API |
| **タイル** | Wear Tiles API + Horologist Tiles |
| **データ同期** | Wear Data Layer API（リアルタイム双方向同期） |
| **健康データ連携** | Health Connect API（Google Fit連携） |
| **ローカルDB** | Room Database |
| **DI** | Hilt (Dagger) |
| **設定保存** | DataStore Preferences |
| **非同期処理** | Kotlin Coroutines + Flow |

---

## 5. プロジェクト構成
```
DripSync/
├── mobile/                    # スマートフォンアプリ
│   ├── ui/                    # Compose UI
│   ├── data/                  # Repository, DataSource
│   ├── domain/                # UseCase, Model
│   └── sync/                  # Data Layer通信
│
├── wear/                      # Wear OSアプリ
│   ├── app/                   # メインアプリ
│   ├── tile/                  # タイル実装
│   ├── watchface/             # ウォッチフェイス
│   └── complication/          # コンプリケーション
│
└── shared/                    # 共通モジュール（モデル、同期ロジック）
```

---

## 6. 開発スケジュール

| フェーズ | 期間 | 内容 |
|----------|------|------|
| **Phase 1** | Week 1-2 | プロジェクトセットアップ、データモデル設計、Room DB実装 |
| **Phase 2** | Week 3-4 | Wear OSタイル実装、基本的な記録機能 |
| **Phase 3** | Week 5-6 | ウォッチフェイス＆コンプリケーション実装 |
| **Phase 4** | Week 7-8 | モバイルアプリUI、Data Layer同期実装 |
| **Phase 5** | Week 9-10 | Health Connect統合、Google Fit連携 |
| **Phase 6** | Week 11-12 | テスト、バグ修正、Play Store公開準備 |

---

## 7. ストア公開要件

### 7.1 Google Play Store

- Google Play デベロッパーアカウント（登録料: $25 一回払い）
- プライバシーポリシー（Health Connectデータ利用についての明記必須）
- アプリアイコン（512x512px）、フィーチャーグラフィック（1024x500px）
- スクリーンショット（スマホ用、Wear OS用それぞれ）
- アプリ説明文（日本語・英語）
- コンテンツレーティング申請

### 7.2 Health Connect 審査

- データアクセス理由の明確な説明
- 必要最小限の権限のみ要求
- データ取り扱いポリシーの準備
- 審査動画の準備（アプリの動作デモ）

---

## 8. リスクと対策

| リスク | 影響度 | 対策 |
|--------|--------|------|
| Health Connect APIの変更 | 🟡 中 | 公式ドキュメント定期確認、抽象化レイヤー設計 |
| Wear OSデバイス多様性 | 🟡 中 | 複数デバイスでのテスト、画面サイズ対応 |
| バッテリー消費 | 🔴 高 | 効率的な同期間隔、バッチ処理の最適化 |
| ストア審査リジェクト | 🟢 低 | ガイドライン遵守、事前チェックリスト作成 |

---

## 9. 次のステップ

1. 本企画書のレビュー・承認
2. 開発環境のセットアップ（Android Studio、エミュレータ）
3. プロジェクト作成・初期Gradle設定
4. Phase 1開発開始

---

## 付録: Claude Code 用プロンプト例

### Phase 1 開始時
```
この企画書を元に、DripSyncプロジェクトを作成してください。

まずPhase 1として以下を実装してください：
1. マルチモジュールプロジェクトのセットアップ（mobile, wear, shared）
2. Gradle設定（version catalog使用）
3. 共通データモデル（HydrationRecord）
4. Room Databaseの実装

技術スタック：
- Kotlin 2.0
- Jetpack Compose
- Hilt
- Room
- Coroutines + Flow
```

### Phase 2 開始時
```
Phase 2として、Wear OSタイルを実装してください。

要件：
- 水分記録用タイル（プリセットボタン: 200ml, 350ml, 500ml）
- タップで即座に記録
- 今日の摂取量を表示
- Horologist Tilesを使用
```

---

*— End of Document —*
